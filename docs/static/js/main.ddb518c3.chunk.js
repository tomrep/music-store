(window["webpackJsonpmusic-store"]=window["webpackJsonpmusic-store"]||[]).push([[0],{174:function(e,t,a){e.exports=a(346)},199:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),l=a.n(o),c=a(9),i=a.n(c),u=a(33),s=a(29),m=a(160),d=a.n(m),v=a(10),f=a(171),p=a(20),g=a.n(p),E=function(e,t){return"http://omdbapi.com/?apikey=".concat("44e85d7c","&s=").concat(e,"&page=").concat(t)},y=function(e){return"http://www.omdbapi.com/?apikey=".concat("44e85d7c","&i=").concat(e)},b=function(e,t){return n.get(E(e,t))},h=function(e){return n.get(y(e))},w=v.d.model("Rating",{source:v.d.maybe(v.d.string),value:v.d.maybe(v.d.string)}),F=v.d.model("Movie",{id:v.d.maybe(v.d.string),title:v.d.maybe(v.d.string),year:v.d.maybe(v.d.string),rated:v.d.maybe(v.d.string),released:v.d.maybe(v.d.string),runtime:v.d.maybe(v.d.string),genre:v.d.maybe(v.d.string),director:v.d.maybe(v.d.string),writer:v.d.maybe(v.d.string),actors:v.d.maybe(v.d.string),plot:v.d.maybe(v.d.string),language:v.d.maybe(v.d.string),country:v.d.maybe(v.d.string),awards:v.d.maybe(v.d.string),ratings:v.d.optional(v.d.array(w),[])}),j=v.d.model("MovieStore",{movies:v.d.optional(v.d.array(F),[]),moviesCount:v.d.optional(v.d.number,0),movie:v.d.optional(F,{}),favorites:v.d.optional(v.d.array(F),[])}).actions((function(e){return{getAllMoviesByName:Object(v.b)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(a,n);case 2:r=t.sent,e.movies=r.Search.map((function(e){return{id:e.imdbID,title:e.Title,year:e.Year}})),e.moviesCount=parseInt(r.totalResults,10);case 5:case"end":return t.stop()}}),t)}))),getMovieById:Object(v.b)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(a);case 2:n=t.sent,e.movie={id:n.imdbID,title:n.Title,year:n.Year,rated:n.Rated,released:n.Released,runtime:n.Runtime,genre:n.Genre,director:n.Director,writer:n.Writer,actors:n.Actors,plot:n.Plot,language:n.Language,country:n.Country,awards:n.Awards,ratings:n.Ratings.map((function(e){return{source:e.Source,value:e.Value}}))};case 4:case"end":return t.stop()}}),t)}))),addFavorite:function(t){e.favorites=[].concat(Object(f.a)(e.favorites),[Object(v.c)(t)]),localStorage.setItem("favorites",JSON.stringify(Object(v.c)(e.favorites)))},deleteFavorite:function(t){e.favorites=e.favorites.filter((function(e){return e.id!==t})),localStorage.setItem("favorites",JSON.stringify(Object(v.c)(e.favorites)))},initFavorites:function(){var t=localStorage.getItem("favorites");Object(v.a)(e.favorites,JSON.parse(t||[]))}}})).views((function(e){return{get allMovies(){return e.movies},get totalCount(){return e.moviesCount},get movieDetail(){return e.movie},get allFavorites(){return e.favorites},isFavorite:function(t){return e.favorites.some((function(e){return e.id===t}))}}}));a(198),a(199);var O=a(347),k=a(67),x=a(35),C=O.a.Header,S=function(){return l.a.createElement(C,{className:"header"},l.a.createElement(k.a,null,l.a.createElement(x.a,{className:"header-brand",span:8},l.a.createElement(s.b,{to:"/"},"Music Store"))))},I=a(120),N=a(13),M=function(){return l.a.createElement(I.a,{mode:"horizontal",theme:"p"},l.a.createElement(I.a.Item,{key:"search"},l.a.createElement(s.b,{to:"/search"},l.a.createElement(N.a,{type:"search"}),l.a.createElement("span",null,"Search"))),l.a.createElement(I.a.Item,{key:"favorites"},l.a.createElement(s.b,{to:"/favorites"},l.a.createElement(N.a,{type:"star"}),l.a.createElement("span",null,"Favorites"))))},R=a(45),B=a(30),P=a(55),A=a(350),z=function(e){var t=e.handleSearch,a=Object(o.useState)(""),n=Object(P.a)(a,2),r=n[0],c=n[1],i=function(){var e=Object(B.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(A.a.Search,{onChange:function(e){var t=e.target;return c(t.value)},onSearch:i,placeholder:"Search for movies...",style:{width:"100%"}})},D=a(65),J=a(348),Y=[{title:"Name",dataIndex:"name",key:"name"},{title:"Year",dataIndex:"year",key:"year",width:100,align:"center"}],L=function(e){var t=e.movies,a=e.handlePageChange,n=e.currentPage,r=e.totalCount,o=t.length?t.map((function(e){return{key:"movie-".concat(e.id),name:l.a.createElement(s.b,{to:"/movie/".concat(e.id)},e.title),year:e.year}})):null;return o?l.a.createElement(J.a,{columns:Y,dataSource:o,pagination:{current:n,onChange:function(e){return a(e)},total:r}}):null};L.defaultProps={movies:[],totalCount:0};var G=Object(u.b)((function(e){var t=e.movies;return{movies:t.allMovies,totalCount:t.totalCount}}))(Object(D.a)(L)),T=function(e){var t=e.getAllMoviesByName,a=Object(o.useState)(1),n=Object(P.a)(a,2),r=n[0],c=n[1],i=Object(o.useState)(""),u=Object(P.a)(i,2),s=u[0],m=u[1];Object(o.useEffect)((function(){(function(){var e=Object(B.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==s&&t(s.toLowerCase(),r);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,r,t]);var d=function(){var e=Object(B.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"container"},l.a.createElement(z,{handleSearch:d}),l.a.createElement(G,{currentPage:r,handlePageChange:function(e){c(e)}}))};T.defaultProps={getAllMoviesByName:function(){return null}};var W=Object(u.b)((function(e){return{getAllMoviesByName:e.movies.getAllMoviesByName}}))(Object(u.c)(T)),H=a(349),V=a(48),q=function(e){var t=e.movie,a=e.id,n=e.getMovieById,r=e.isFavorite,c=e.makeFavorite,i=e.deleteFavorite,u=Object(o.useState)(r(a)),s=Object(P.a)(u,2),m=s[0],d=s[1];Object(o.useEffect)((function(){(function(){var e=Object(B.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(a));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}));var v=function(){var e=Object(B.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=6;break}return e.next=3,i(a);case 3:d(!1),e.next=9;break;case 6:return e.next=8,c(t);case 8:d(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=t.title,p=t.year,E=t.rated,y=t.release,b=t.runtime,h=t.genre,w=t.director,F=t.writer,j=t.actors,O=t.plot,k=t.language,x=t.country,C=t.awards,S=t.ratings;return a?l.a.createElement(H.a,{size:"small",style:{zIndex:"9000"},title:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},f,l.a.createElement(V.a,{onClick:v,size:"small",type:"deafult"},l.a.createElement(N.a,{theme:m?"filled":"outlined",type:"star"})))},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("strong",null,"Year: "),p),l.a.createElement("p",null,l.a.createElement("strong",null,"Rated: "),E),l.a.createElement("p",null,l.a.createElement("strong",null,"Release: "),y),l.a.createElement("p",null,l.a.createElement("strong",null,"Runtime: "),b),l.a.createElement("p",null,l.a.createElement("strong",null,"Genre: "),h),l.a.createElement("p",null,l.a.createElement("strong",null,"Director: "),w),l.a.createElement("p",null,l.a.createElement("strong",null,"Writer: "),F),l.a.createElement("p",null,l.a.createElement("strong",null,"Actors: "),j),l.a.createElement("p",null,l.a.createElement("strong",null,"Plot: "),O),l.a.createElement("p",null,l.a.createElement("strong",null,"Language: "),k),l.a.createElement("p",null,l.a.createElement("strong",null,"Country: "),x),l.a.createElement("p",null,l.a.createElement("strong",null,"Awards: "),C),l.a.createElement("p",null,l.a.createElement("strong",null,"Ratings: "),S.map((function(e){return l.a.createElement("span",{key:"rating-".concat(e.source),style:{marginLeft:"10px"}},l.a.createElement("strong",null,e.source,": "),e.value)}))))):l.a.createElement("p",null,"No movie Found")};q.defaultProps={deleteFavorite:null,getMovieById:null,isFavorite:null,makeFavorite:null,movie:{}};var K=Object(u.b)((function(e){var t=e.movies;return{movie:t.movieDetail,getMovieById:t.getMovieById,makeFavorite:t.addFavorite,deleteFavorite:t.deleteFavorite,isFavorite:t.isFavorite}}))(Object(D.a)(q)),Q=function(e){var t=e.match;return l.a.createElement("div",null,l.a.createElement(K,{id:t.params.id}))},U=function(e){var t=e.id,a=e.title,n=e.year,r=e.country,o=e.runtime,c=e.favorite,i=e.handleFavoriteChange,u=function(){var e=Object(B.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(H.a,{size:"small"},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(s.b,{to:"/movie/".concat(t)},a),l.a.createElement(V.a,{onClick:u,size:"small",type:"deafult"},l.a.createElement(N.a,{theme:c?"filled":"outlined",type:"star"}))),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement("p",null,l.a.createElement("strong",null,"Year: "),n),l.a.createElement("p",null,l.a.createElement("strong",null,"Country: "),r),l.a.createElement("p",null,l.a.createElement("strong",null,"Runtime: "),o)))},X=function(e){var t=e.movies,a=e.isFavorite,n=e.makeFavorite,r=e.deleteFavorite,o=function(){var e=Object(B.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a(t)){e.next=2;break}return e.abrupt("return",r(t));case 2:return e.abrupt("return",n(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(k.a,{gutter:16},t.length?t.map((function(e){return l.a.createElement(x.a,{className:"mb-1",key:"movie-col-".concat(e.id),xl:6},l.a.createElement(U,{country:e.country,favorite:a(e.id),handleFavoriteChange:o,id:e.id,runtime:e.runtime,title:e.title,year:e.year}))})):null)};X.defaultProps={deleteFavorite:null,isFavorite:null,makeFavorite:null,movies:[]};var Z=Object(u.b)((function(e){var t=e.movies;return{movies:t.allFavorites,isFavorite:t.isFavorite,makeFavorite:t.addFavorite,deleteFavorite:t.deleteFavorite}}))(Object(D.a)(X)),$=function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"404 - Not Found"))},_=function(){return l.a.createElement(R.d,null,l.a.createElement(R.a,{exact:!0,from:"/",to:"/search"}),l.a.createElement(R.b,{component:W,exact:!0,path:"/search"}),l.a.createElement(R.b,{component:Q,exact:!0,path:"/movie/:id"}),l.a.createElement(R.b,{component:Z,exact:!0,path:"/favorites"}),l.a.createElement(R.b,{component:$}))},ee=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(O.a,null,l.a.createElement(S,null),l.a.createElement(M,null),l.a.createElement(O.a,{className:"layout-height"},l.a.createElement(O.a.Content,null,l.a.createElement(_,null)))))},te=function(){var e=v.d.model("RootStore",{movies:v.d.optional(j,{})});return(r=e.create()).movies.initFavorites(),r}();(n=d.a.create()).interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e.response||e.message)}));var ae=document.getElementById("root");i.a.render(l.a.createElement(u.a,te,l.a.createElement(s.a,null,l.a.createElement(ee,null))),ae)}},[[174,1,2]]]);
//# sourceMappingURL=main.ddb518c3.chunk.js.map